{% extends 'base.html' %}

{% block title %} Home {% endblock %}

{% block body %}

<!-- Hero Section -->
<div class="container-fluid modern-hero">
    <div class="container">
        <div class="row align-items-center">
            <div class="col-lg-6">
                <div class="hero-content animate__animated animate__fadeInLeft">
                    <h1>Welcome to FlaskShopper</h1>
                    <p>Discover amazing products at unbeatable prices. Your one-stop destination for quality shopping.
                    </p>
                    <a href="#products" class="modern-btn">
                        <i class="fas fa-shopping-bag me-2"></i>
                        Shop Now
                    </a>
                </div>
            </div>
            <div class="col-lg-6">
                <div class="animate__animated animate__fadeInRight">
                    <img src="../static/images/center.gif" alt="Shopping" class="img-fluid rounded-3">
                </div>
            </div>
        </div>
    </div>
</div>

<div class="container">
    <div class="row">
        <!-- Categories Sidebar -->
        <div class="col-lg-3 col-md-12">
            <div class="category-sidebar animate__animated animate__fadeInLeft">
                <h5 class="mb-4 fw-bold text-center">Categories</h5>
                <a href="#" class="category-item">
                    <i class="fa fa-shopping-basket"></i>
                    <span>Supermarket</span>
                </a>
                <a href="#" class="category-item">
                    <i class="fa fa-heart"></i>
                    <span>Health & Beauty</span>
                </a>
                <a href="#" class="category-item">
                    <i class="fa fa-home"></i>
                    <span>Home & Office</span>
                </a>
                <a href="#" class="category-item">
                    <i class="fa fa-tshirt"></i>
                    <span>Fashion</span>
                </a>
                <a href="#" class="category-item">
                    <i class="fa fa-laptop"></i>
                    <span>Electronics</span>
                </a>
                <a href="#" class="category-item">
                    <i class="fa fa-gamepad"></i>
                    <span>Gaming</span>
                </a>
                <a href="#" class="category-item">
                    <i class="fa fa-baby"></i>
                    <span>Baby Products</span>
                </a>
                <a href="#" class="category-item">
                    <i class="fa fa-futbol"></i>
                    <span>Sports & Outdoors</span>
                </a>
            </div>

            <!-- Service Cards -->
            <div class="row">
                <div class="col-12">
                    <div class="service-card animate__animated animate__fadeInUp">
                        <div class="service-icon">
                            <img src="../static/images/help.png" alt="Help">
                        </div>
                        <h6 class="service-title">24/7 Support</h6>
                        <p class="text-muted small">Customer care available</p>
                    </div>
                </div>
                <div class="col-12">
                    <div class="service-card animate__animated animate__fadeInUp">
                        <div class="service-icon">
                            <img src="../static/images/return.png" alt="Returns">
                        </div>
                        <h6 class="service-title">Easy Returns</h6>
                        <p class="text-muted small">Hassle-free refunds</p>
                    </div>
                </div>
                <div class="col-12">
                    <div class="service-card animate__animated animate__fadeInUp">
                        <div class="service-icon">
                            <img src="../static/images/payment.png" alt="Payments">
                        </div>
                        <h6 class="service-title">Secure Payments</h6>
                        <p class="text-muted small">Multiple payment options</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Main Content -->
        <div class="col-lg-9 col-md-12">
            <!-- Feature Strip -->
            <div class="feature-strip animate__animated animate__fadeInUp">
                <div class="row">
                    <div class="col-6 col-md-3">
                        <div class="feature-item">
                            <img src="../static/images/techweek.png" alt="Tech Week">
                            <span>Tech Week</span>
                        </div>
                    </div>
                    <div class="col-6 col-md-3">
                        <div class="feature-item">
                            <img src="../static/images/FreeDelivery.png" alt="Free Delivery">
                            <span>Free Delivery</span>
                        </div>
                    </div>
                    <div class="col-6 col-md-3">
                        <div class="feature-item">
                            <img src="../static/images/food.png" alt="Food">
                            <span>Fresh Food</span>
                        </div>
                    </div>
                    <div class="col-6 col-md-3">
                        <div class="feature-item">
                            <img src="../static/images/airtime.png" alt="Airtime">
                            <span>Bills & Airtime</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Products Section -->
            <div class="products-container" id="products">
                <h2 class="section-title">Featured Products</h2>

                {% if items %}
                <div class="row">
                    {% for item in items %}
                    <div class="col-lg-4 col-md-6 col-sm-12 mb-4">
                        <div class="product-card animate__animated animate__fadeInUp hover-lift"
                            data-delay="{{ loop.index0 * 0.1 }}">
                            <img src="/media/{{ item.product_picture }}" alt="{{ item.product_name }}"
                                class="product-image">

                            <h6 class="product-name">{{ item.product_name }}</h6>

                            <div class="price-container">
                                <div>
                                    <h5 class="current-price">{{ item.current_price | currency }}</h5>
                                    {% if item.previous_price and item.previous_price > item.current_price %}
                                    <p class="previous-price">{{ item.previous_price | currency }}</p>
                                    {% endif %}
                                </div>
                            </div>

                            <a href="/add-to-cart/{{ item.id }}" class="add-to-cart-btn">
                                <i class="fas fa-cart-plus me-2"></i>Add to Cart
                            </a>

                            {% if item.in_stock > 0 %}
                            <p class="stock-info">
                                <i class="fas fa-box me-1"></i>{{ item.in_stock }} items left
                            </p>
                            {% else %}
                            <p class="stock-info text-danger">
                                <i class="fas fa-exclamation-triangle me-1"></i>Out of stock
                            </p>
                            {% endif %}
                        </div>
                    </div>
                    {% endfor %}
                </div>
                {% else %}
                <div class="text-center py-5">
                    <i class="fas fa-box-open fa-3x text-muted mb-3"></i>
                    <h4 class="text-muted">No products available</h4>
                    <p class="text-muted">Check back later for amazing deals!</p>
                </div>
                {% endif %}
            </div>
        </div>
    </div>
</div>

<!-- Additional Features Section -->
<div class="container my-5">
    <div class="row">
        <div class="col-md-4 mb-4">
            <div class="service-card text-center animate__animated animate__fadeInUp">
                <div class="service-icon mx-auto">
                    <i class="fas fa-shipping-fast fa-2x text-white"></i>
                </div>
                <h5 class="mt-3">Fast Shipping</h5>
                <p class="text-muted">Free delivery on orders over Ksh 2,000</p>
            </div>
        </div>
        <div class="col-md-4 mb-4">
            <div class="service-card text-center animate__animated animate__fadeInUp" style="animation-delay: 0.2s">
                <div class="service-icon mx-auto">
                    <i class="fas fa-shield-alt fa-2x text-white"></i>
                </div>
                <h5 class="mt-3">Secure Shopping</h5>
                <p class="text-muted">Your data is protected with SSL encryption</p>
            </div>
        </div>
        <div class="col-md-4 mb-4">
            <div class="service-card text-center animate__animated animate__fadeInUp" style="animation-delay: 0.4s">
                <div class="service-icon mx-auto">
                    <i class="fas fa-medal fa-2x text-white"></i>
                </div>
                <h5 class="mt-3">Quality Guarantee</h5>
                <p class="text-muted">100% authentic products with warranty</p>
            </div>
        </div>
    </div>
</div>

<script>
    // Set animation delays for product cards
    document.addEventListener('DOMContentLoaded', function () {
        document.querySelectorAll('.product-card[data-delay]').forEach(card => {
            const delay = card.getAttribute('data-delay');
            card.style.animationDelay = delay + 's';
        });
    });

    // Smooth scrolling for anchor links
    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener('click', function (e) {
            e.preventDefault();
            const target = document.querySelector(this.getAttribute('href'));
            if (target) {
                target.scrollIntoView({
                    behavior: 'smooth',
                    block: 'start'
                });
            }
        });
    });

    // Reveal animation on scroll
    const observerOptions = {
        threshold: 0.1,
        rootMargin: '0px 0px -50px 0px'
    };

    const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
            if (entry.isIntersecting) {
                entry.target.classList.add('active');
            }
        });
    }, observerOptions);

    document.querySelectorAll('.reveal').forEach(el => {
        observer.observe(el);
    });
</script>

{% endblock %}